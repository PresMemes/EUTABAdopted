############################################	
## ALL
############################################
#Frontier Districts
building_eutab_dev_district = {
	base_buildtime = @b1_time
	base_cap_amount = 1
	position_priority = 199

	category = government

	potential = {
		NOT = { has_modifier = slave_colony }
		exists = owner
		owner = { is_regular_empire = yes }
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 75 #PM: AI does not like the idea of free buildings
		}
	}

	planet_modifier = {
		planet_housing_add = 4
		pop_environment_tolerance = 0.05
		planet_jobs_energy_produces_mult = 0.1
		planet_jobs_minerals_produces_mult = 0.1
		planet_jobs_food_produces_mult = 0.1
		job_clerk_add = 2
		planet_max_buildings_add = 1
	}

	upgrades = {
		building_eutab_interior_ministry #Authoritarian not Imperial
		building_eutab_imperial_residence #Authoritarian Imperial
		building_eutab_planetary_parliament #Egalitarian
		building_eutab_xeno_adaptation #Xenophobe not Pacifist
		building_eutab_expo_guard #Xenophobic Pacifist
		building_eutab_xeno_district #Xenophile
		building_eutab_wargame #Militarist
		building_eutab_eco_preserve #Pacifist
		building_eutab_arcology #Materialist
		building_eutab_monument_unity #Spiritualist
	}

	prerequisites = {
		"tech_eutab_dev_district"
	}

	triggered_desc = {
		text = job_clerk_effect_desc
	}

	destroy_trigger = {
		exists = owner
		owner = { is_regular_empire = no }
	}

	ai_resource_production = {
		trigger = {
			is_difficulty <= 3
			num_buildings = { 
				type = any #PM: OK, so basically what this means is that if the AI has a planet with 10 or less buildings on it, it should build a Frontier Settlement, which then unlocks a slot for a research lab
				value <= 10
			}
		}
		physics_research = 15
		society_research = 15
		engineering_research = 15
	}

	ai_resource_production = {
		trigger = {
			is_difficulty > 3 #PM: The AI won't build this at higher levels since 15 of each research means nothing to a GA AI, so I have to bump up the values on higher difficulties.
			num_buildings = { 
				type = any
				value <= 10
			}
		}
		physics_research = 30
		society_research = 30
		engineering_research = 30
	}
}

#################################
#Project Support Lab (B)
building_eutab_support_lab = {
	base_buildtime = @b2_time
	base_cap_amount = 1

	category = research

	potential = {
		NOR = {
			has_modifier = slave_colony
			has_modifier = resort_colony
		}
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
		}
		upkeep = {
			energy = @b2_upkeep
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_researcher_add = 4
			job_manager_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			job_brain_drone_add = 6
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {
			job_calculator_add = 6
		}
	}

	country_modifier = {
		megastructure_build_speed_mult = 0.01
		megastructures_alloys_cost_mult = -0.005
	}

	prerequisites = {
		"tech_eutab_support_lab"
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		text = job_researcher_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		text = job_manager_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		text = job_brain_drone_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		text = job_calculator_effect_desc
	}

	destroy_trigger = {
		OR = {
			has_modifier = slave_colony
			has_modifier = resort_colony
		}
	}
}

#################################	
#Battle Praxeum
building_eutab_battle_praxeum = {
	base_buildtime = @b2_time
	can_build = no

	category = army

	potential = {
		exists = owner
		owner = { NOT = { has_valid_civic = civic_reanimated_armies } }
	}

	allow = {
		has_upgraded_capital = yes
	}

	army_modifier = {
		army_starting_experience_add = 200
	}

	triggered_planet_modifier = {
		potential = {
			owner = { is_gestalt = no }
		}
		modifier = {
			job_soldier_add = 5
		}
	}

	triggered_planet_modifier = {
		potential = {
			owner = { is_gestalt = yes }
		}
		modifier = {
			job_warrior_drone_add = 5
		}
	}

	resources = {
		category = planet_buildings
		produces = {
			trigger = {
				exists = owner
				owner = { has_valid_civic = civic_citizen_service }
			}
			unity = 4
		}
		cost = {
			minerals = @b2_minerals
			volatile_motes = @b2_rare_cost
		}
		upkeep = {
			energy = @b2_upkeep
			volatile_motes = @b2_rare_upkeep
		}
	}

	prerequisites = {
		"tech_eutab_battle_praxeum"
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_warrior_drone_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = job_soldier_effect_desc
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				has_valid_civic = civic_reanimated_armies
				AND = {
					is_ai = yes
					prev = {
						NOR = {
							has_building = building_stronghold
							has_building = building_fortress
							has_building = building_eutab_battle_praxeum
						}
					}
				}
			}
		}
	}

	convert_to = {
		building_dread_encampment
	}
}

################################
#Gaia District (B)
building_eutab_gaia_district = {
	base_buildtime = @b2_time
	can_build = no

	category = amenity

	potential = {
		NOR = {
			is_planet_class = pc_habitat
			has_modifier = slave_colony
		}
		exists = owner
		owner = {
			is_regular_empire = yes
			NOT = { has_valid_civic = civic_shared_burden }
		}
	}
	allow = {
		has_upgraded_capital = yes
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
			rare_crystals = @b2_rare_cost
		}
		upkeep = {
			energy = @b2_upkeep
		}
	}

	planet_modifier = {
		planet_housing_add = 9
		planet_amenities_add = 15
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_active_tradition = tr_domination_imperious_architecture
			}
		}
		modifier = {
			planet_housing_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_technology = tech_eutab_habitation_studies
			}
		}
		modifier = {
			planet_housing_add = 3
		}
	}

	prerequisites = {
		"tech_eutab_gaia_district"
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_regular_empire = no
				has_valid_civic = civic_shared_burden
			}
		}
		has_modifier = slave_colony
	}

	convert_to = {
		building_drone_megastorage
		building_expanded_warren
		building_communal_housing_large
	}
}

#################################
#Hydroponics Tower (B) (U)
building_eutab_hydroponics_tower = {
	base_buildtime = @b1_time
	can_build = no

	category = resource

	potential = {
		has_upgraded_capital = yes
		exists = owner
		owner = {
			OR = {
				country_uses_food = yes
				is_ai = no
			}
		}
	}

	planet_modifier = {
		planet_amenities_add = 5
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
				is_fallen_empire_spiritualist = no
				OR = {
					is_anglers_empire = no
					AND = {
						is_anglers_empire = yes
						NOT = { PREV = { is_wet = yes } }
					}
				}
			}
		}
		modifier = {
			job_farmer_add = 5
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_fallen_empire_spiritualist = yes }
		}
		modifier = {
			job_fe_acolyte_farm_add = 5
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_origin = origin_void_dwellers }
		}
		modifier = {
			job_farmer_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
				is_fallen_empire_spiritualist = no
				is_anglers_empire = yes
				PREV = { is_wet = yes }
			}
		}
		modifier = {
			job_angler_add = 2
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
		}
		upkeep = {
			energy = @b2_upkeep
		}
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = no
				is_fallen_empire_spiritualist = no
				OR = {
					is_anglers_empire = no
					AND = {
						is_anglers_empire = yes
						NOT = { prev = { is_wet = yes } }
					}
				}
			}
		}
		text = job_farmer_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_fallen_empire_spiritualist = yes }
		}
		text = job_fe_acolyte_farm_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_fallen_empire_spiritualist = no
				is_anglers_empire = yes
				PREV = { is_wet = yes }
			}
		}
		text = job_aqu_angler_effect_desc
	}

	prerequisites = {
		"tech_eutab_sustainable_architecture"
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				is_ai = yes
				country_uses_food = no
			}
			planet = {
				NOT = { is_planet_class = pc_habitat }
				free_building_slots = 0
				owner = {
					is_ai = yes
					has_monthly_income = {
						resource = food
						value > 150
					}
				}
			}
		}
	}

	convert_to = {
		building_hydroponics_farm
	}
}

#################################
#Foundation Institute (B) (U)
building_eutab_foundation_institute_1 = {											#PM: I don't know why, I don't want to know why, I shouldn't have to wonder why, 
	base_buildtime = 720															# but for whatever reason naming this building building_eutab_foundation_institute
	can_build = no																	# breaks supercomputers??? for some reason, for only machines, for only supercomputers,
	category = research																# this name in particular lets you build infinite of them for some reason??????? frick you clausewitz engine
	icon = building_eutab_foundation_institute

	potential = {
		exists = owner
		owner = { has_ascension_perk = ap_technological_ascendancy }
	}

	allow = {
		has_upgraded_capital = yes
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			exotic_gases = @b3_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
			exotic_gases = @b3_rare_upkeep
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = no }
		}
		modifier = {
			planet_researchers_produces_mult = 0.15
			job_head_researcher_add = 3
			job_researcher_add = 4
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			planet_researchers_produces_mult = 0.15
			job_brain_drone_add = 7
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {
			planet_researchers_produces_mult = 0.15
			job_calculator_add = 7
		}
	}

	prerequisites = {
		"tech_eutab_foundation_institute"
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		text = job_brain_drone_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		text = job_calculator_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = job_head_researcher_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = job_researcher_effect_desc
	}

	ai_resource_production = {
		trigger = {
			has_research_building = yes
		}
		physics_research = 15
		society_research = 15
		engineering_research = 15
	}

	convert_to = {
		building_institute
		building_supercomputer
	}
}

####################################
#Grand Hall of Justice (B)
building_eutab_grand_hall_justice = {
	base_buildtime = @b3_time
	base_cap_amount = 1

	category = government

	potential = {
		NOT = { has_modifier = slave_colony }
		num_pops >= 80
		has_upgraded_capital = yes
		exists = owner
		owner = { is_regular_empire = yes }
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			volatile_motes = @b3_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
			volatile_motes = @b3_rare_upkeep
		}
	}
	
	planet_modifier = {
		job_eutab_judge_add = 6
		job_bureaucrat_add = 4
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_technology = "tech_telepathy"
			}
		}
		modifier = {
			job_telepath_add = 2
		}
	}

	prerequisites = {
		"tech_eutab_street_judge"
	}

	triggered_desc = {
		text = job_eutab_judge_effect_desc
	}

	triggered_desc = {
		text = job_bureaucrat_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_technology = "tech_telepathy"
			}
		}
		text = job_telepath_effect_desc
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
	}

	destroy_trigger = {
		exists = owner
		owner = { is_regular_empire = no }
	}


}

############################################	
##             AUTHORITARIAN			  ##
############################################	
#Ministry of the Interior (B) (U)
building_eutab_interior_ministry = {
	base_buildtime = @b2_time
	can_build = no

	category = government

	potential = {
		exists = owner
		owner = { eu_auth_other = yes }
	}

	allow = {
		has_upgraded_capital = yes
	}

	show_tech_unlock_if = {
		eu_auth_other = yes
	}

	planet_modifier = {
		job_bureaucrat_add = 1
		job_clerk_add = 3
		job_clerk_per_pop = 0.05
		job_bureaucrat_per_pop = 0.02
		planet_max_buildings_add = 1
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
			rare_crystals = @b2_rare_cost
		}
		upkeep = {
			energy = @b2_upkeep
			rare_crystals = @b2_rare_upkeep
		}
	}

	triggered_desc = {
		text = job_bureaucrat_effect_desc
	}

	triggered_desc = {
		text = job_clerk_effect_desc
	}

	upgrades = {
		building_eutab_shroud_ministry
	}

	prerequisites = {
		"tech_eutab_governors_district"
	}

	destroy_trigger = {
		exists = owner
		owner = { eu_auth_other = no }
	}

	convert_to = {
		building_eutab_dev_district
	}
}


#Ministry of the Shroud (B) (U)
building_eutab_shroud_ministry = {
	base_buildtime = @b3_time
	can_build = no

	category = government
	
	potential = {
		exists = owner
		owner = { eu_auth_other = yes }
	}

	allow = {
		has_upgraded_capital = yes
	}

	show_tech_unlock_if = {
		eu_auth_other = yes
	}

	planet_modifier = {
		job_bureaucrat_add = 2
		job_clerk_add = 3
		job_telepath_add = 3
		job_clerk_per_pop = 0.05
		job_bureaucrat_per_pop = 0.025
		planet_max_buildings_add = 1
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			rare_crystals = @b3_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
			rare_crystals = @b3_rare_upkeep
		}
	}

	triggered_desc = {
		text = job_bureaucrat_effect_desc
	}

	triggered_desc = {
		text = job_clerk_effect_desc
	}

	triggered_desc = {
		text = job_telepath_effect_desc
	}

	prerequisites = {
		"tech_eutab_shroud_ministry"
	}
	
	destroy_trigger = {
		exists = owner
		owner = { eu_auth_other = no }
	}

	convert_to = {
		building_eutab_interior_ministry
	}
}

#Imperial Residence (B) (U)
building_eutab_imperial_residence = {
	base_buildtime = @b2_time
	can_build = no

	category = government

	potential = {
		exists = owner
		owner = { eu_auth_imp = yes }
	}

	allow = {
		has_upgraded_capital = yes
	}

	show_tech_unlock_if = {
		eu_auth_imp = yes
	}

	planet_modifier = {
		job_eutab_minor_noble_add = 4
		job_eutab_minor_noble_per_pop = 0.04
		planet_max_buildings_add = 1
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
			rare_crystals = @b2_rare_cost
		}
		upkeep = {
			energy = @b2_upkeep
			rare_crystals = @b2_rare_upkeep
		}
	}

	triggered_desc = {
		text = job_eutab_minor_noble_effect_desc
	}

	upgrades = {
		building_eutab_imperial_seat
	}

	prerequisites = {
		"tech_eutab_governors_district"
	}

	destroy_trigger = {
		exists = owner
		owner = {
			eu_auth_imp = no
		}
	}

	convert_to = {
		building_eutab_dev_district
	}
}

#Imperial Seat (B) (U)
building_eutab_imperial_seat = {
	base_buildtime = @b3_time
	can_build = no

	category = government

	potential = {
		exists = owner
		owner = { eu_auth_imp = yes }
	}

	allow = {
		has_upgraded_capital = yes
	}

	show_tech_unlock_if = {
		eu_auth_imp = yes
	}

	planet_modifier = {
		job_eutab_minor_noble_add = 4
		job_eutab_minor_noble_per_pop = 0.05
		job_eutab_shroud_lord_add = 2
		planet_max_buildings_add = 1
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			rare_crystals = @b3_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
			rare_crystals = @b3_rare_upkeep
		}
	}

	triggered_desc = {
		text = job_eutab_minor_noble_effect_desc
	}

	triggered_desc = {
		text = job_eutab_shroud_lord_effect_desc
	}

	prerequisites = {
		"tech_eutab_shroud_ministry"
	}
	
	destroy_trigger = {
		exists = owner
		owner = { eu_auth_imp = no }
	}

	convert_to = {
		building_eutab_imperial_residence
	}
}

############################################	
##              EGALITARIAN               ##
############################################	
#Planetary Parliament
building_eutab_planetary_parliament = {
	base_buildtime = @b2_time
	can_build = no

	category = government

	potential = {
		exists = owner
		owner = { is_egalitarian = yes }
	}

	allow = {
		has_upgraded_capital = yes
	}

	planet_modifier = {
		job_bureaucrat_add = 2
		job_bureaucrat_per_pop = 0.05
		planet_jobs_unity_produces_mult = 0.15
		planet_max_buildings_add = 1
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
			rare_crystals = 40
		}
		upkeep = {
			energy = @b2_upkeep
			rare_crystals = @b2_rare_upkeep
		}
		produces = {
			trigger = {
				exists = owner
				owner = {
					has_technology = tech_eutab_dd_implants
				}
			}
			unity = 3
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_valid_civic = civic_parliamentary_system
			}
		}
		modifier = {
			planet_stability_add = 5
		}
	}

	triggered_desc = {
		text = job_bureaucrat_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_valid_civic = civic_parliamentary_system
			}
		}
		text = job_clerk_effect_desc
	}

	prerequisites = {
		"tech_eutab_planetary_parliament"
	}
	
	destroy_trigger = {
		exists = owner
		owner = { is_egalitarian = no }
	}

	convert_to = {
		building_eutab_dev_district
	}
}

#Colonial Adaptation Laboratory
building_eutab_adaptation_lab = {
	base_buildtime = @b4_time
	empire_limit = {
		base = 1
	}
	
	category = research
	
	potential = {
		exists = owner
        owner = { has_ethic = ethic_fanatic_egalitarian }
    }
	
	allow = {
		has_upgraded_capital = yes
	}
	
	planet_modifier = {
		job_eutab_master_bio_add = 2
		job_researcher_add = 6
	}
	
	country_modifier = {
		country_society_tech_research_speed = 0.05
		planet_jobs_food_produces_mult = 0.1
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b4_minerals
			exotic_gases = @b3_rare_cost
			alloys = @b3_rare_cost
		}
		upkeep = {
			energy = @b4_upkeep
		}
	}
	
	prerequisites = {
		"tech_eutab_adaptation_lab"
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
	}
	
	triggered_desc = {
		text = job_eutab_master_bio_effect_desc
	}

	triggered_desc = {
		text = job_researcher_effect_desc
	}

	destroy_trigger = {
		exists = owner
		owner = { NOT = { has_ethic = ethic_fanatic_egalitarian } }
	}
}

############################################	
##              XENOPHOBE       		  ##
############################################	
#Xeno Adaptation Facility
building_eutab_xeno_adaptation = {
	base_buildtime = @b2_time
	can_build = no

	category = amenity

	potential = {
		exists = owner
		owner = { is_xenophobe_not_pac = yes }
	}

	allow = {
		has_upgraded_capital = yes
	}

	planet_modifier = {
		job_healthcare_add = 2
		job_researcher_add = 2
		pop_environment_tolerance = 0.1
		planet_max_buildings_add = 1
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
			exotic_gases = @b2_rare_cost
		}
		upkeep = {
			energy = @b2_upkeep
			exotic_gases = @b2_rare_upkeep
		}
	}

	prerequisites = {
		"tech_eutab_xeno_adaptation"
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_technology = tech_eutab_upgrade_centres
			}
		}
		modifier = {
			job_roboticist_add = 1
		}
	}

	upgrades = {
		building_eutab_purity_centre
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
	}

	triggered_desc = {
		text = job_healthcare_effect_desc
	}

	triggered_desc = {
		text = job_researcher_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_technology = tech_eutab_upgrade_centres
			}
		}
		text = job_roboticist_effect_desc
	}
		
	destroy_trigger = {
		exists = owner
		owner = { is_xenophobe_not_pac = no }
	}

	convert_to = {
		building_eutab_dev_district
	}
}

#Purification centre
building_eutab_purity_centre = {
	base_buildtime = @b3_time
	can_build = no

	category = amenity

	potential = {
		exists = owner
		owner = { has_ethic = ethic_fanatic_xenophobe }
	}

	allow = {
		has_upgraded_capital = yes
	}

	planet_modifier = {
		job_healthcare_add = 4
		job_researcher_add = 4
		pop_environment_tolerance = 0.1
		planet_max_buildings_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_technology = tech_eutab_upgrade_centres
			}
		}
		modifier = {
			job_roboticist_add = 1
		}
	}

	country_modifier = {
		category_biology_research_speed_mult = 0.01
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			exotic_gases = @b3_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
			exotic_gases = @b3_rare_upkeep
		}
	}

	prerequisites = {
		"tech_eutab_purity_centre"
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
	}

	triggered_desc = {
		text = job_healthcare_effect_desc
	}

	triggered_desc = {
		text = job_researcher_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_technology = tech_eutab_upgrade_centres
			}
		}
		text = job_roboticist_effect_desc
	}
		
	destroy_trigger = {
		exists = owner
		owner = { NOT = { has_ethic = ethic_fanatic_xenophobe } }
	}

	convert_to = {
		building_eutab_xeno_adaptation
	}
}

#Exploritory Guard Station
building_eutab_expo_guard = {
	base_buildtime = @b2_time
	can_build = no

	category = research

	potential = {
		exists = owner
		owner = { is_xenophobe_and_pac = yes }
	}

	allow = {
		has_upgraded_capital = yes
	}

	planet_modifier = {
		job_bureaucrat_add = 1
		job_soldier_add = 1
		job_researcher_add = 3
		planet_max_buildings_add = 1
	}

	country_modifier = {
		empire_size_pops_mult = -0.05
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
			exotic_gases = 50
			alloys = 50
		}
		upkeep = {
			energy = @b2_upkeep
			exotic_gases = @b2_rare_upkeep
			alloys = @b2_rare_upkeep
		}
	}

	prerequisites = {
		"tech_eutab_expo_guard"
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
	}

	triggered_desc = {
		text = job_bureaucrat_effect_desc
	}

	triggered_desc = {
		text = job_soldier_effect_desc
	}

	triggered_desc = {
		text = job_researcher_effect_desc
	}
		
	destroy_trigger = {
		exists = owner
		owner = { is_xenophobe_and_pac = no }
	}

	convert_to = {
		building_eutab_dev_district
	}
}

############################################	
##               XENOPHILE                ##
############################################	
#Xeno District
building_eutab_xeno_district = {
	base_buildtime = @b2_time
	can_build = no

	category = amenity

	potential = {
		NOT = { has_modifier = slave_colony }
		exists = owner
		owner = { is_xenophile = yes }
	}

	allow = {
		has_upgraded_capital = yes
	}

	planet_modifier = {
		planet_housing_add = 8
		pop_environment_tolerance = 0.05
		planet_immigration_pull_mult = 0.25
		job_eutab_anthro_add = 3
		planet_max_buildings_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_active_tradition = tr_domination_imperious_architecture
			}
		}
		modifier = {
			planet_housing_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_technology = tech_eutab_virtual_experiences
			}
		}
		modifier = {
			job_entertainer_add = 2
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
			exotic_gases = @b2_rare_cost
		}
		upkeep = {
			energy = @b2_upkeep
			exotic_gases = @b2_rare_upkeep
		}
	}

	triggered_desc = {
		text = job_eutab_anthro_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_technology = tech_eutab_virtual_experiences
			}
		}
		text = job_entertainer_effect_desc
	}

	prerequisites = {
		"tech_eutab_xeno_district"
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_xenophile = no
				prev = { has_modifier = slave_colony }
			}
		}
	}

	convert_to = {
		building_eutab_dev_district
	}
}

#Medigel Cultivator (EU)
building_eutab_medigel_cultivator = {
	base_buildtime = @b4_time

	empire_limit = {
		base = 1
	}

	category = research

	potential = {
		NOT = { has_modifier = slave_colony }
		exists = owner
		owner = { has_ethic = ethic_fanatic_xenophile }
	}

	allow = {
		has_upgraded_capital = yes
	}

	planet_modifier = {
		job_eutab_master_bio_add = 2
		job_researcher_add = 6
		planet_jobs_society_research_produces_mult = 0.2
	}

	country_modifier = {
		pop_environment_tolerance = 0.05
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
			exotic_gases = @b3_rare_cost
			alloys = @b3_rare_cost
		}
		upkeep = {
			energy = @b4_upkeep
		}
	}

	prerequisites = {
		"tech_eutab_medigel_cultivation"
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
	}

	triggered_desc = {
		text = job_eutab_master_bio_effect_desc
	}

	triggered_desc = {
		text = job_researcher_effect_desc
	}

	ai_resource_production = {
		trigger = {
			planet_resource_compare = {
				resource = society_research
				value >= 24
				type = produces
			}
		}
		society_research = 10
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				NOT = { has_ethic = ethic_fanatic_xenophile }
				has_modifier = slave_colony
			}
		}
	}
}

############################################	
##              MILITARIST                ##
############################################	
#Wargame Complex
building_eutab_wargame = {
	base_buildtime = @b2_time
	can_build = no

	category = army

	potential = {
		exists = owner
		owner = { is_militarist = yes }
	}

	allow = {
		has_upgraded_capital = yes
	}

	army_modifier = {
		army_starting_experience_add = 100
	}

	planet_modifier = {
		job_eutab_gladiator_add = 5
		planet_max_buildings_add = 1
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
			alloys = 40
		}
		upkeep = {
			energy = @b2_upkeep
		}
	}

	prerequisites = {
		"tech_eutab_wargame"
	}

	upgrades = {
		building_eutab_warlink_colosseum
	}

	triggered_desc = {
		text = job_eutab_gladiator_effect_desc
	}
	
	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_militarist = no
			}
		}
	}

	convert_to = {
		building_eutab_dev_district
	}
}

#Warlink Colosseum
building_eutab_warlink_colosseum = {
	base_buildtime = @b3_time
	can_build = no

	category = army
	
	potential = {
		exists = owner
		owner = { is_militarist = yes }
	}

	allow = {
		has_upgraded_capital = yes
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			alloys = @b3_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
		}
	}

	army_modifier = {
		army_starting_experience_add = 200
	}

	planet_modifier = {
		job_eutab_gladiator_add = 8
		pop_happiness = 0.05
		planet_max_buildings_add = 1
	}

	triggered_desc = {
		text = job_eutab_gladiator_effect_desc
	}

	prerequisites = {
		"tech_eutab_warlink_colosseum"
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				has_ascension_perk = ap_the_flesh_is_weak
				is_militarist = no
			}
		}
	}

	convert_to = {
		building_eutab_wargame
	}
}

############################################	
##              PACIFIST                  ##
############################################
#Ecology Preserve
building_eutab_eco_preserve = {
	base_buildtime = @b1_time
	can_build = no

	category = amenity

	potential = {
		NOT = { has_modifier = slave_colony }
		exists = owner
		owner = { is_pacifist = yes }
	}

	allow = {
		has_upgraded_capital = yes
	}

	planet_modifier = {
		planet_stability_add = 5
		planet_max_districts_add = -1
		job_eutab_ranger_add = 5
		planet_max_buildings_add = 1
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b1_minerals
		}
		upkeep = {
			energy = @b1_upkeep
		}
	}

	triggered_desc = {
		text = job_eutab_ranger_effect_desc
	}

	prerequisites = {
		"tech_eutab_eco_preserve"
	}
	
	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				has_ascension_perk = ap_the_flesh_is_weak
				is_pacifist = no
				prev = { has_modifier = slave_colony }
			}
		}
	}

	convert_to = {
		building_eutab_dev_district
	}
}

#Genetic Data Vaults - Now an Institute upgrade
building_eutab_genetic_data_vault = {
	base_buildtime = @b3_time
	can_build = no

	category = research

	potential = {
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			has_modifier = crucible_colony
		}
		exists = owner
		owner = { has_ethic = ethic_fanatic_pacifist }
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			exotic_gases = @b3_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
			exotic_gases = @b3_rare_upkeep
		}
	}

	planet_modifier = {
		planet_researchers_produces_mult = 0.15
		job_head_researcher_add = 2
		job_eutab_genetic_chronicler_add = 2
		job_eutab_genetic_chronicler_per_pop = 0.02
	}

	prerequisites = {
		"tech_eutab_genetic_data_vault"
	}

	triggered_desc = {
		text = job_head_researcher_effect_desc
	}

	triggered_desc = {
		text = job_eutab_genetic_chronicler_effect_desc
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
	}

	ai_resource_production = {
		trigger = {
			has_research_building = yes
		}
		physics_research = 12
		society_research = 12
		engineering_research = 12
	}

	destroy_trigger = {
		exists = owner
		OR = {
			OR = {
				has_modifier = resort_colony
				has_modifier = slave_colony
				has_modifier = crucible_colony
				owner = { NOT = { has_ethic = ethic_fanatic_pacifist } }
			}
			AND = {
				owner = { is_ai = yes }
				has_research_building = no
			}
		}
	}

	convert_to = {
		building_supercomputer
		building_institute
	}
}

#Afterlife Vault - Now an Institute upgrade
building_eutab_afterlife_vault = {
	base_buildtime = @b3_time
	can_build = no

	category = research

	potential = {
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			has_modifier = crucible_colony
		}
		exists = owner
		owner = { has_ethic = ethic_fanatic_pacifist }
	}
	
	allow = {
		has_major_upgraded_capital = yes
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			exotic_gases = @b3_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
			exotic_gases = @b3_rare_upkeep
		}
	}

	planet_modifier = {
		planet_researchers_produces_mult = 0.25
		job_head_researcher_add = 3
	}

	country_modifier = {
		category_computing_research_speed_mult = 0.01
	}

	prerequisites = {
		"tech_eutab_digital_afterlife"
	}

	triggered_desc = {
		text = job_head_researcher_effect_desc
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
	}

	ai_resource_production = {
		trigger = {
			has_research_building = yes
		}
		physics_research = 10
		society_research = 10
		engineering_research = 10
	}

	destroy_trigger = {
		exists = owner
		OR = {
			NOR = {
				has_modifier = resort_colony
				has_modifier = slave_colony
				has_modifier = crucible_colony
				owner = { NOT = { has_ethic = ethic_fanatic_pacifist } }
			}
			AND = {
				owner = { is_ai = yes }
				has_research_building = no
			}
		}
	}

	convert_to = {
		building_supercomputer
		building_institute
	}
}

############################################	
##              MATERIALIST               ##
############################################	
#Arcology
building_eutab_arcology = {
	base_buildtime = @b2_time
	can_build = no

	category = amenity

	potential = {
		NOT = { has_modifier = slave_colony }
		exists = owner
		owner = { is_materialist = yes }
	}

	allow = {
		has_upgraded_capital = yes
	}

	planet_modifier = {
		planet_housing_add = 8
		job_clerk_add = 2
		job_farmer_add = 3
		job_researcher_add = 3
		planet_max_buildings_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_active_tradition = tr_domination_imperious_architecture
			}
		}
		modifier = {
			planet_housing_add = 1
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
			alloys = @b2_rare_cost
		}
		upkeep = {
			alloys = 2
		}
	}

	prerequisites = {
		"tech_eutab_arcology"
	}

	triggered_desc = {
		text = job_clerk_effect_desc
	}

	triggered_desc = {
		text = job_farmer_effect_desc
	}

	triggered_desc = {
		text = job_researcher_effect_desc
	}

	upgrades = {
		building_eutab_comp_arcology
	}
		
	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_materialist = no
				prev = { has_modifier = slave_colony }
			}
		}
	}

	convert_to = {
		building_eutab_dev_district
	}
}

#Computational Arcology
building_eutab_comp_arcology = {
	base_buildtime = @b2_time
	can_build = no

	category = amenity

	potential = {
		NOT = { has_modifier = slave_colony }
		exists = owner
		owner = { is_materialist = yes }
	}

	allow = {
		has_upgraded_capital = yes
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 600
			alloys = 100
		}
		upkeep = {
			alloys = 4
		}
	}

	planet_modifier = {
		planet_housing_add = 14
		job_technician_add = 4
		job_farmer_add = 2
		job_researcher_add = 8
		planet_max_buildings_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_active_tradition = tr_domination_imperious_architecture
			}
		}
		modifier = {
			planet_housing_add = 1
		}
	}

	prerequisites = {
		"tech_eutab_comp_arcology"
	}

	triggered_desc = {
		text = job_technician_effect_desc
	}

	triggered_desc = {
		text = job_farmer_effect_desc
	}

	triggered_desc = {
		text = job_researcher_effect_desc
	}
		
	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_materialist = no
				prev = { has_modifier = slave_colony }
			}
		}
	}

	convert_to = {
		building_eutab_arcology
	}
}

#Cloning Complex
building_eutab_adv_clone_vats = {
	base_buildtime = @b2_time
	can_build = no

	category = government

	potential = {
		NOT = { has_modifier = resort_colony }
		exists = owner
		owner = { has_ascension_perk = ap_engineered_evolution }
	}

	resources = {
		category = planet_buildings

		# Base cost
		cost = {
			minerals = 750
		}

		# Org/Lith Cost
		cost = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = no }
			}
			food = 750
		}
		cost = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = yes }
			}
			energy = 750
		}

		# Base upkeep
		upkeep = {
			energy = @b2_upkeep
			exotic_gases = @b2_rare_upkeep
		}
		# Org/Lith upkeep
		upkeep = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = no }
			}
			food = 45
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = yes }
			}
			minerals = 45
		}
	}

	planet_modifier = {
		planet_pop_assembly_organic_add = 4.5
		job_researcher_add = 3
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_tradition = tr_genetics_efficient_cloning }
		}
		modifier = {
			planet_pop_assembly_organic_add = 1.5
		}
	}

	country_modifier = {
		category_biology_research_speed_mult = 0.01
	}

	prerequisites = {
		"tech_eutab_adv_clone_vats"
	}

	destroy_trigger = {
		exists = owner
		OR = {
			NOT = { owner = { has_ascension_perk = ap_engineered_evolution } }
			AND = {
				owner = { is_ai = yes }
				free_district_slots = 0
				free_building_slots = 0
				free_housing <= 0
				free_jobs <= 0
			}
		}
	}

	triggered_desc = {
		text = job_researcher_effect_desc
	}

	triggered_desc = {
		trigger = {
			OR = {
				has_building = building_robot_assembly_plant
				AND = {
					exists = assembling_species
					assembling_species = { is_robotic_species = yes }
				}
			}
		}
		text = tooltip_organic_and_artificial_assembly_warning
	}

	convert_to = {
		building_clone_vats
	}
}

############################################	
## 			   SPIRITUALIST               ##
############################################	
#Planetfall Shrine
building_eutab_monument_unity = {
	base_buildtime = @b2_time
	can_build = no

	category = unity

	potential = {
		NOR = {
			is_planet_class = pc_habitat
			has_modifier = slave_colony
		}
		exists = owner
		owner = { is_spiritualist = yes }
	}

	allow = {
		has_upgraded_capital = yes
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
		}
		upkeep = {
			energy = @b2_upkeep
		}
	}

	planet_modifier = {
		job_culture_worker_add = 4
		pop_happiness = 0.05
		planet_max_buildings_add = 1
	}

	prerequisites = {
		"tech_eutab_monument_unity"
	}

	triggered_desc = {
		text = job_culture_worker_effect_desc
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_spiritualist = no
				prev = { has_modifier = slave_colony }
			}
		}
	}

	convert_to = {
		building_eutab_dev_district
	}
}

building_eutab_symbol_unity = {
	base_buildtime = @b2_time
	base_cap_amount = 1

	category = unity

	potential = {
		NOT = { has_modifier = slave_colony }
		exists = owner
		owner = { has_ethic = ethic_fanatic_spiritualist }
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
		}
		upkeep = {
			energy = @b2_upkeep
		}
		produces = {
			unity = 15
		}
	}

	planet_modifier = {
		pop_government_ethic_attraction = 0.2
		planet_jobs_unity_produces_mult = 0.15
		job_priest_add = 5
	}

	country_modifier = {
		empire_size_penalty_mult = -0.025
	}

	prerequisites = {
		"tech_eutab_one_true_faith"
	}

	triggered_desc = {
		text = job_priest_effect_desc
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				NOT = { has_ethic = ethic_fanatic_spiritualist }
				prev = { has_modifier = slave_colony }
			}
		}
	}
}

############################################	
##                 HIVE                   ##
############################################		
#Spawning Garden	
building_eutab_spawning_garden = {
	base_buildtime = @b2_time
	can_build = no

	category = amenity

	potential = {
		exists = owner
		owner = {
			is_hive_empire = yes 
			NOT = { has_origin = origin_progenitor_hive }
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
			exotic_gases = @b2_rare_cost
		}
		upkeep = {
			energy = @b2_upkeep
			exotic_gases = @b2_rare_upkeep
		}
	}

	planet_modifier = {
		job_spawning_drone_add = 2
		job_maintenance_drone_add = 2
		pop_growth_speed = 0.1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_active_tradition = tr_cybernetics_modular_cybernetics_hive }
		}
		modifier = {
			job_cyber_drone_add = 3
		}
	}

	triggered_desc = {
		trigger = {
			NAND = {
				exists = owner
				owner = { has_origin = origin_necrophage }
				exists = growing_species
				growing_species = {
					NOT = { has_trait = trait_hive_mind }
				}
			}
		}
		text = job_spawning_drone_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { has_origin = origin_necrophage }
			exists = growing_species
			growing_species = {
				NOT = { has_trait = trait_hive_mind }
			}
		}
		text = job_spawning_drone_necrophage_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_active_tradition = tr_cybernetics_modular_cybernetics_hive
			}
		}
		text = job_cyber_drone_effect_desc
	}

	triggered_desc = {
		text = spawning_pool_tooltip
	}

	triggered_desc = {
		text = job_maintenance_drone_effect_desc
	}

	prerequisites = {
		"tech_eutab_spawning_garden"
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_hive_empire = no
				has_origin = origin_progenitor_hive
				AND = {
					prev = { buildings_stop_pop = yes }
					is_ai = yes
				}
			}
		}
	}

	convert_to = {
		building_offspring_nest
		building_spawning_pool
	}
}

building_eutab_beta_node = {
	base_buildtime = @b2_time
	base_cap_amount = 1

	category = unity

	potential = {
		exists = owner
		owner = { is_hive_empire = yes }
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 250
			energy = 100
		}
		cost = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = yes }
			}
			energy = 100
			minerals = 100
		}

		cost = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = no }
			}
			food = 200
		}
		upkeep = {
			energy = @b2_upkeep
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = yes }
			}
			minerals = @b2_upkeep
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = no }
			}
			food = @b2_upkeep
		}
		produces = {
			unity = 15
		}
	}

	planet_modifier = {
		job_eutab_caretaker_add = 4
		planet_jobs_productive_produces_mult = 0.1
		planet_jobs_productive_upkeep_mult = 0.05
	}

	upgrades = {
		building_eutab_hive_alpha_node
	}

	triggered_desc = {
		text = job_eutab_caretaker_effect_desc
	}

	prerequisites = {
		"tech_eutab_h_beta_node"
	}

	ai_resource_production = { #PM: Need to tell the AI that this'll give some complex output, sadly this means they'll spam this on every planet but oh well
		trigger = {
			always = yes
		}
		physics_research = 15
		society_research = 15
		engineering_research = 15
		unity = 17
		alloys = 17
	}

	ai_resource_production = {
		trigger = {
			is_difficulty >= 3
		}
		physics_research = 10
		society_research = 10
		engineering_research = 10
		unity = 10
		alloys = 10
	}

	destroy_trigger = {
		exists = owner
		owner = { is_hive_empire = no }
	}
}

#Hive Alpha Node
building_eutab_hive_alpha_node = {
	base_buildtime = @b3_time
	can_build = no

	category = unity

	potential = {
		is_artificial = no
		has_major_upgraded_capital = yes
		exists = owner
		owner = { is_hive_empire = yes }
		#num_pops >= 60 #PM: Replaced with above trigger since some mods reduce the number of pops making this hard to achieve
	}

	planet_modifier = {
		job_eutab_caretaker_add = 6
		planet_jobs_productive_produces_mult = 0.2
		planet_jobs_productive_upkeep_mult = 0.1
	}

	country_modifier = {
		planetary_ascension_effect_mult = 0.01
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			energy = @b3_minerals
		}
		cost = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = no }
			}
			food = @b3_minerals
		}
		cost = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = yes }
			}
			minerals = @b1_minerals
			energy = @b1_minerals
		}
		upkeep = {
			energy = @b3_upkeep
			
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = no }
			}
			food = @b3_upkeep
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = yes }
			}
			minerals = 4
			energy = 4
		}
		produces = {
			unity = 25
		}
	}

	triggered_desc = {
		text = job_eutab_caretaker_effect_desc
	}

	prerequisites = {
		"tech_eutab_hive_alpha_node"
	}

	ai_resource_production = {
		trigger = {
			NOT = { has_building = building_eutab_hive_alpha_node }
		}
		physics_research = 20
		society_research = 20
		engineering_research = 20
		unity = 23
		alloys = 23
	}

	ai_resource_production = {
		trigger = {
			NOT = { has_building = building_eutab_hive_alpha_node }
			is_difficulty >= 3
		}
		physics_research = 15
		society_research = 15
		engineering_research = 15
		unity = 15
		alloys = 15
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_hive_empire = no
				NOT = { has_ascension_perk = ap_eutab_mind_matter }
			}
		}
	}

	convert_to = {
		building_eutab_beta_node
	}
}

#Local Expansion Node
building_eutab_hive_node_support = {
	base_buildtime = @b2_time
	base_cap_amount = 2

	category = unity

	potential = {
		has_building = building_eutab_hive_alpha_node
		exists = owner
		owner = { is_hive_empire = yes }
	}

	planet_modifier = {
		job_eutab_caretaker_add = 4
		planet_building_build_speed_mult = 0.15
		planet_decision_enact_speed_mult = 0.2
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b1_minerals
			energy = 150
		}
		upkeep = {
			energy = @b2_upkeep
		}
		produces = {
			unity = 10
		}
	}

	triggered_desc = {
		text = job_eutab_caretaker_effect_desc
	}

	prerequisites = {
		"tech_eutab_hive_alpha_node"
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_hive_empire = no
				NOT = { has_ascension_perk = ap_eutab_mind_matter }
			}
		}
	}

	ai_resource_production = { #PM: please AI why won't you build this damn thing
		trigger = {
			NOT = { has_building = building_eutab_hive_node_support }
		}
		volatile_motes = 15
		exotic_gases = 15
		rare_crystals = 15
		alloys = 30
		physics_research = 30
		society_research = 30
		engineering_research = 30
	}

	ai_resource_production = {
		trigger = { 
			NOT = { has_building = building_eutab_hive_node_support }
			is_difficulty >= 3
		}
		volatile_motes = 10
		exotic_gases = 10
		rare_crystals = 10
		alloys = 10
		physics_research = 10
		society_research = 10
		engineering_research = 10
	}

	upgrades = {
		building_eutab_hive_node_research_phy
		building_eutab_hive_node_stars
		building_eutab_hive_node_manage
		building_eutab_hive_node_mega
	}
}

#Research Node
building_eutab_hive_node_research_phy = {
	base_buildtime = @b2_time
	can_build = no

	category = research

	potential = {
		has_building = building_eutab_hive_alpha_node
		exists = owner
		owner = { is_hive_empire = yes }
	}

	planet_modifier = {
		job_eutab_caretaker_add = 2
		job_brain_drone_add = 5
		planet_researchers_produces_mult = 0.05
	}

	country_modifier = {
		all_technology_research_speed = 0.01
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
		}

		cost = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = no }
			}
			food = 300
		}

		cost = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = yes }
			}
			minerals = 400
		}

		upkeep = {
			exotic_gases = @b2_rare_upkeep
		}

		upkeep = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = no }
			}
			food = @b2_upkeep
		}

		upkeep = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = yes }
			}
			energy = 7
		}

		produces = {
			unity = 5
		}
	}

	triggered_desc = {
		text = job_eutab_caretaker_effect_desc
	}

	triggered_desc = {
		text = job_brain_drone_effect_desc
	}

	prerequisites = {
		"tech_eutab_hive_node_research"
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_hive_empire = no
				NOT = { has_ascension_perk = ap_eutab_mind_matter }
			}
		}
	}
}

#Interstellar Control Node
building_eutab_hive_node_stars = {
	base_buildtime = @b2_time
	can_build = no

	category = army

	potential = {
		has_building = building_eutab_hive_alpha_node
		exists = owner
		owner = { is_hive_empire = yes }
	}

	planet_modifier = {
		job_eutab_caretaker_add = 2
		job_warrior_drone_add = 5
	}

	country_modifier = {
		starbase_upgrade_speed_mult = 0.05
		starbase_module_build_speed_mult = 0.05
		starbase_building_build_speed_mult = 0.05
		starbase_defense_platform_capacity_add = 2
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
		}

		cost = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = no }
			}
			food = 300
		}

		cost = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = yes }
			}
			minerals = 400
		}

		upkeep = {
			rare_crystals = @b2_rare_upkeep
		}

		upkeep = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = no }
			}
			food = @b2_upkeep
		}

		upkeep = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = yes }
			}
			energy = 7
		}

		produces = {
			unity = 5
		}
	}

	triggered_desc = {
		text = job_eutab_caretaker_effect_desc
	}

	triggered_desc = {
		text = job_warrior_drone_effect_desc
	}

	prerequisites = {
		"tech_eutab_hive_node_stars"
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_hive_empire = no
				NOT = { has_ascension_perk = ap_eutab_mind_matter }
			}
		}
	}

	ai_resource_production = {
		trigger = {
			has_fortress_designation = yes
			NOT = { has_building = building_eutab_hive_node_stars }
		}
		physics_research = 20
		society_research = 20
		engineering_research = 20
		alloys = 15
	}
}

#Drone Command Node
building_eutab_hive_node_manage = {
	base_buildtime = @b2_time
	can_build = no

	category = government

	potential = {
		has_building = building_eutab_hive_alpha_node
		exists = owner
		owner = { is_hive_empire = yes }
	}

	planet_modifier = {
		job_eutab_caretaker_add = 2
		job_patrol_drone_add = 5
		planet_jobs_produces_mult = 0.05
	}

	country_modifier = {
		planet_colony_development_speed_mult = 0.1
		planet_clear_blocker_speed_mult = 0.2
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
		}

		cost = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = no }
			}
			food = 300
		}

		cost = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = yes }
			}
			minerals = 400
		}

		upkeep = {
			exotic_gases = @b2_rare_upkeep
		}

		upkeep = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = no }
			}
			food = @b2_upkeep
		}

		upkeep = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = yes }
			}
			energy = 7
		}

		produces = {
			unity = 5
		}
	}

	triggered_desc = {
		text = job_eutab_caretaker_effect_desc
	}

	triggered_desc = {
		text = job_patrol_drone_effect_desc
	}

	prerequisites = {
		"tech_eutab_hive_node_manage"
	}
	
	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_hive_empire = no
				NOT = { has_ascension_perk = ap_eutab_mind_matter }
			}
		}
	}
}

#Deep Space Coordination Node
building_eutab_hive_node_mega = {
	base_buildtime = @b2_time
	can_build = no

	category = government

	potential = {
		has_building = building_eutab_hive_alpha_node
		exists = owner
		owner = { is_hive_empire = yes }
	}

	planet_modifier = {
		job_eutab_caretaker_add = 2
		job_synapse_drone_add = 5
		planet_jobs_produces_mult = 0.05
	}

	country_modifier = {
		megastructure_build_speed_mult = 0.05
		starbases_upkeep_mult = -0.02
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
		}

		cost = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = no }
			}
			food = 300
		}

		cost = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = yes }
			}
			minerals = 400
		}

		upkeep = {
			volatile_motes = @b2_rare_upkeep
		}

		upkeep = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = no }
			}
			food = @b2_upkeep
		}

		upkeep = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = yes }
			}
			energy = 7
		}
		produces = {
			unity = 5
		}
	}

	triggered_desc = {
		text = job_eutab_caretaker_effect_desc
	}

	triggered_desc = {
		text = job_synapse_drone_effect_desc
	}

	prerequisites = {
		"tech_eutab_hive_node_mega"
	}
	
	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_hive_empire = no
				NOT = { has_ascension_perk = ap_eutab_mind_matter }
			}
		}
	}

	ai_resource_production = {
		trigger = {
			always = yes #PM: This is *really* good building to have
		}
		alloys = 30
	}
}

############################################	
##                MACHINE                 ##
############################################	
#Automation sector
building_eutab_automation_sector = {
	base_buildtime = @b3_time
	can_build = no

	category = pop_assembly

	potential = {
		exists = owner
		owner = { is_machine_empire = yes }
	}

	planet_modifier = {
		job_replicator_add = 5
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			rare_crystals = @b4_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
			rare_crystals = @b4_rare_upkeep
		}
	}

	triggered_desc = {
		text = job_replicator_effect_desc
	}

	prerequisites = {
		"tech_eutab_m_automation_sector"
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = { is_robot_empire = no }
			AND = {
				owner = { is_ai = yes }
				free_district_slots = 0
				free_building_slots = 0
				free_housing <= 0
				free_jobs <= 0
			}
		}
	}

	convert_to = {
		building_robot_assembly_plant
		building_robot_assembly_complex
		building_machine_assembly_plant
		building_machine_assembly_complex
	}
}

#Preservation Nexus
building_eutab_preservation_nexus = {
	base_buildtime = @b2_time
	can_build = no

	category = amenity

	potential = {
		exists = owner
		owner = { is_machine_empire = yes }
	}

	planet_modifier = {
		job_maintenance_drone_add = 5
		job_replicator_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_active_tradition = tr_domination_modular_depot }
		}
		modifier = {
			planet_housing_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_active_tradition = tr_synchronicity_integrated_preservation }
		}
		modifier = {
			job_maintenance_drone_add = 2
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
			volatile_motes = @b2_rare_cost
		}
		upkeep = {
			energy = @b1_upkeep
			volatile_motes = @b2_rare_upkeep
		}
	}

	prerequisites = {
		"tech_micro_replicators"
	}

	show_tech_unlock_if = {
		is_gestalt = yes
	}

	triggered_desc = {
		text = job_maintenance_drone_effect_desc
	}

	triggered_desc = {
		text = job_replicator_effect_desc
	}

	destroy_trigger = {
		exists = owner
		owner = { is_machine_empire = no }
	}
}

## Machine World Buildings
# Dark Matter Annihilator
building_eutab_dm_energy = {
	base_buildtime = @b3_time
	base_cap_amount = 2

	category = resource

	potential = {
		is_planet_class = pc_machine
		exists = owner
		owner = { is_machine_empire = yes }
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			sr_dark_matter = 200
		}
		upkeep = {
			sr_dark_matter = 4
		}
	}

	planet_modifier = {
		job_technician_drone_add = 10
		job_technician_drone_per_pop = 0.1
	}

	triggered_desc = {
		text = job_technician_drone_effect_desc
	}

	prerequisites = {
		"tech_eutab_m_command_control"
	}

	ai_resource_production = {
		trigger = {
			num_pops >= 40
		}
		energy = 40
	}

	destroy_trigger = {
		exists = owner
		owner = { is_machine_empire = no }
	}
}

# Microsingularity Siphon
building_eutab_dm_siphon = {
	base_buildtime = @b3_time

	category = resource

	potential = {
		is_planet_class = pc_machine
		exists = owner
		owner = { is_machine_empire = yes }
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
			alloys = 500			#non standard
		}
		upkeep = {
			energy = @b4_upkeep
			alloys = 5			#non standard
		}
	}

	planet_modifier = {
		job_eutab_siphon_add = 3
	}

	triggered_desc = {
		text = job_eutab_siphon_effect_desc
	}

	prerequisites = {
		"tech_eutab_m_command_control"
	}

	destroy_trigger = {
		exists = owner
		owner = { is_machine_empire = no }
	}
}

# Gravitomagnetic Forge
building_eutab_dm_forge = {
	base_buildtime = @b3_time
	base_cap_amount = 1

	category = resource

	potential = {
		is_planet_class = pc_machine
		exists = owner
		owner = { is_machine_empire = yes }
		
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			volatile_motes = 200
		}
		upkeep = {
			energy = 15
			volatile_motes = 5
		}
	}

	planet_modifier = {
		planet_metallurgists_upkeep_mult = -0.25
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_machine_empire = yes
				is_catalytic_empire = no
			}
		}
		modifier = {
			job_fabricator_add = 10
			job_fabricator_per_pop = 0.1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_catalytic_empire = yes
			}
		}
		modifier = {
			job_catalytic_drone_add = 10
			job_catalytic_drone_per_pop = 0.1
		}
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_machine_empire = yes
				is_catalytic_empire = no
			}
		}
		text = job_fabricator_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = yes
				is_catalytic_empire = yes
			}
		}
		text = job_catalytic_drone_effect_desc
	}

	prerequisites = {
		"tech_eutab_m_command_control"
	}

	destroy_trigger = {
		exists = owner
		owner = { is_machine_empire = no }
	}
}

# Cognitive Distribution Core
building_eutab_dm_comp = {
	base_buildtime = @b3_time
	base_cap_amount = 1

	category = resource

	potential = {
		is_planet_class = pc_machine
		exists = owner
		owner = { is_machine_empire = yes }
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			rare_crystals = 200
		}
		upkeep = {
			energy = 15
			rare_crystals = 5
		}
	}

	planet_modifier = {
		job_calculator_add = 10
		job_calculator_per_pop = 0.1
		planet_researchers_upkeep_mult = -0.25
	}

	triggered_desc = {
		text = job_calculator_effect_desc
	}

	prerequisites = {
		"tech_eutab_m_command_control"
	}

	ai_resource_production = {
		trigger = {
			num_pops >= 40
		}
		physics_research = 20
		society_research = 20
		engineering_research = 20
	}

	destroy_trigger = {
		exists = owner
		owner = { is_machine_empire = no }
	}
}

# Molecular Synchronizer
building_eutab_dm_molecular_synchronizer = {
	base_buildtime = @b3_time
	base_cap_amount = 1
	icon = building_eutab_process_monitor

	category = resource

	potential = {
		is_planet_class = pc_machine
		exists = owner
		owner = { is_machine_empire = yes }
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 1000
			alloys = 200
			volatile_motes = 100
		}
		upkeep = {
			energy = 25
			alloys = 10
			volatile_motes = 5
		}
	}

	planet_modifier = {
		job_mining_drone_add = 10
		job_mining_drone_per_pop = 0.1
	}

	triggered_desc = {
		text = job_mining_drone_effect_desc
	}

	prerequisites = {
		"tech_eutab_m_command_control"
	}

	destroy_trigger = {
		exists = owner
		owner = { is_machine_empire = no }
	}
}

############################################	
##          GESTALT BUILDINGS             ##
############################################	
building_eutab_geothermal_tap = {
	base_buildtime = @b2_time
	base_cap_amount = 2

	category = resource

	potential = {
		is_artificial = no
		exists = owner
		owner = { is_gestalt = yes }
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
			volatile_motes = @b2_rare_cost
		}
		upkeep = {
			volatile_motes = @b2_rare_upkeep
		}
		produces = {
			energy = 10
		}
	}

	planet_modifier = {
		job_technician_drone_add = 4
		pop_environment_tolerance = -0.1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		planet_jobs_upkeep_mult = 0.025
	}

	triggered_desc = {
		text = job_technician_drone_effect_desc
	}

	prerequisites = {
		"tech_eutab_geothermal_tap"
	}

	ai_resource_production = {
		trigger = {
			exists = owner
			habitability = { who = owner_main_species value < 0.8 } #PM: Stops the AI from spamming this on every single planet they have
		}
		energy = -40
	}

	destroy_trigger = {
		exists = owner
		owner = { is_gestalt = no }
	}
}
