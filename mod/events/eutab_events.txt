namespace = eutab

# Cloning Complex can_species_be_assembled work-around
planet_event = {
	id = eutab.1
	hide_window = yes
	is_triggered_only = yes

	trigger = { last_building_changed = building_eutab_adv_clone_vats }

	immediate = { set_planet_flag = can_organic_assemble_flag }
}

# Machine AP
country_event = {
	id = eutab.8
	title = "eutab.8.title"
	desc = "eutab.8.desc"
	picture = GFX_evt_eutab_machine_evolution
	show_sound = event_evolution_mastery
	is_triggered_only = yes
	option = {
		name = ACKNOWLEDGED
		tooltip = {
			add_research_option = tech_eutab_m_adaptation_mastery
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Hive Mind AP
country_event = {
	id = eutab.9
	title = eutab.9.title
	desc = {
		trigger = { is_homicidal = no }
		text = eutab.9.desc.normal
	}
	desc = {
		trigger = { is_homicidal = yes }
		text = eutab.9.desc.swarm
	}
	picture = GFX_evt_eutab_hive_evolution
	show_sound = event_evolution_mastery
	is_triggered_only = yes
	option = {
		name = "eutab.9.option.normal"
		trigger = { is_homicidal = no }
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = "eutab.9.option.swarm"
		trigger = { is_homicidal = yes }
		ai_chance = {
			factor = 1
		}
	}
}

# Institute of Exo Design event
planet_event = {
	id = eutab.10
	title = eutab.10.title
	desc = eutab.10.desc
	picture = GFX_evt_engineering_research
	show_sound = event_activating_unknown_technology
	is_triggered_only = yes
	trigger = {
		exists = owner
		has_active_building = building_eutab_ins_exo_design
	}
	immediate = {
		random_playable_country = {
			limit = {
				exists = this
				has_communications = root.owner
			}
			save_event_target_as = eutab_ins_exo_design_target
		}
	}
	# Physics Tech
	option = {
		name = "eutab.10.physics"
		trigger = {
			exists = event_target:eutab_ins_exo_design_target
			exists = owner
			owner = {
				can_copy_random_tech_from = {
					who = event_target:eutab_ins_exo_design_target
					area = physics
				}
			}
		}
		owner = {
			copy_random_tech_from = {
				who = event_target:eutab_ins_exo_design_target
				area = physics
				progress = 0.03
			}
		}
		ai_chance = {
			factor = 5
		}
	}
	# Society Tech
	option = {
		name = "eutab.10.society"
		trigger = {
			exists = event_target:eutab_ins_exo_design_target
			exists = owner
			owner = {
				can_copy_random_tech_from = {
					who = event_target:eutab_ins_exo_design_target
					area = society
				}
			}
		}
		owner = {
			copy_random_tech_from = {
				who = event_target:eutab_ins_exo_design_target
				area = society
				progress = 0.03
			}
		}
		ai_chance = {
			factor = 5
		}
	}
	# Engineering Tech
	option = {
		name = "eutab.10.engineering"
		trigger = {
			exists = event_target:eutab_ins_exo_design_target
			exists = owner
			owner = {
				can_copy_random_tech_from = {
					who = event_target:eutab_ins_exo_design_target
					area = engineering
				}
			}
		}
		owner = {
			copy_random_tech_from = {
				who = event_target:eutab_ins_exo_design_target
				area = engineering
				progress = 0.03
			}
		}
		ai_chance = {
			factor = 5
		}
	}
	# Research Points
	option = {
		name = "eutab.10.research_points"
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = 2.5
				min = @tier1researchmin
				max = @tier5researchmax
			}
			add_monthly_resource_mult = {
				resource = society_research
				value = 2.5
				min = @tier1researchmin
				max = @tier5researchmax
			}
			add_monthly_resource_mult = {
				resource = engineering_research
				value = 2.5
				min = @tier1researchmin
				max = @tier5researchmax
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Gatekeeper event for eutab.10, fires every 10 years per country
country_event = {
	id = eutab.11
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		has_technology = tech_eutab_ins_exo_design
		any_owned_planet = { has_active_building = building_eutab_ins_exo_design }
	}
	immediate = {
		random_owned_planet = {
			limit = { has_active_building = building_eutab_ins_exo_design }
			planet_event = { id = eutab.10 days = 1 random = 1799 } # Days = 0 means instant regardless of random?
		}
	}
}